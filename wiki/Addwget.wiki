#summary Addwget script for CTS users.
#labels Featured,Phase-Design

= Описание =

Скрипт предназначен для автоматического добавления ссылок в список локальных закачек ФО. Актуально только для абонентов ЦТС.

= Подробности =

В качестве параметра срипт принимает имя файла, затем автоматически создает ссылку на этот файл в  каталоге веб-сервера, затем добавляет ссылку в закачки.

== Сложности ==

Собственно сама процедура добавления закачки ничего сложного из себя не представляет - просто передать нужные данные через POST запрос, но в данном случае она осложняется несколькими факторами:
  * _Куки_. Для того чтобы добавить ссылку нужно быть авторизованным, причем все это оформлено в достаточно запутанном виде. Потому я пошёл по пути наименьшего сопротивления и просто использую coockies.txt из профиля Firefox
  * _Кодировки_. Webget нормально воспринимает только cp1251 (некоторые еще не вылезли из каменного века), потому приходится по ходу конвертировать имена файлов, комментарии. Плюс нужно перекодировать данные для POST
  * Отсутствие какой-либо документации, грандиозно малое содействие администрации

= Скачать =

Текущая версия доступна для скачивания через [http://non7top.googlecode.com/svn/trunk/scripts/addwget/ Websvn], либо командой
{{{
svn co http://non7top.googlecode.com/svn/trunk/scripts/addwget/ addwget
}}}
Так же доступен ebuild в составе оверлея [inst_overlay non7top]

[Addwget_configure Инструкция по настройке]

== Требования ==

 * Скрипт написан на bash, потому требует его наличия
 * enca - используется для преобразований кодировок
 * php - используется преобразования не ASCII последовательностей в URI
 * wget - собственно через него и происходит добавление ссылок

= Планы =

В текущих планах:
 * Переработка файла конфигурации, добавления кода для автоматического создания конфига
 * Улучшения работы с категориями
 * Создание кроссплатформенной версии на Qt, но этому мешает сложная система с куками.